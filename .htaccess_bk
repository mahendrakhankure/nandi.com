RewriteEngine on

RewriteCond $1 !^(index\.php|(.*)\.swf|forums|images|css|downloads|jquery|js|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
#RewriteRule ^(.*)$ ./index.php?$1 [L,QSA,NE]
RewriteRule ^(.*)$ ./index.php?$1 [B,NC,NE,L,QSA]


#authrization
#AuthType Basic
#AuthName "phpmyadmin"
#AuthUserFile /etc/apache2/.htpasswd
#Require user


#http to https
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

#cors
Header add Access-Control-Allow-Origin "*"
Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
Header add Access-Control-Allow-Methods "PUT, GET, POST, DELETE, OPTIONS"



#redirect ip to hostname
#RewriteEngine On
#RewriteCond %{HTTP_HOST} ^18\.141\.94\.139$
#RewriteCond %{HTTPS} !=on
#RewriteRule ^(.*)$ https://dpbosses.live/$1 [R=301,L]

#RewriteCond %{HTTP_HOST} ^18\.141\.94\.139$
#RewriteCond %{HTTPS} =on
#RewriteRule ^(.*)$ https://dpbosses.live/$1 [R=301,L]

#Options -Indexes


#security headers
<IfModule mod_headers.c>
#    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set X-Content-Type-Options "nosniff"
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
 #   Header always set Content-Security-Policy "default-src 'self'; frame-ancestors 'none'; script-src 'self' https: 'unsafe-inline' 'unsafe-eval'; style-src 'self' https: 'unsafe-inline'"
Header always set Permissions-Policy " microphone=(), camera=()"
   Header always set Referrer-Policy "no-referrer-when-downgrade"
</IfModule>

<IfModule mod_headers.c>
    <FilesMatch "\.(ico|jpe?g|png|gif|svg|webp)$">
        Header set Cache-Control "max-age=2592000, public"
    </FilesMatch>
   #  <FilesMatch "\.(css|js)$">
   #      Header set Cache-Control "max-age=2592000, public"
   #  </FilesMatch>
   #  <FilesMatch "\.(woff|woff2)$">
   #      Header set Cache-Control "max-age=31536000, public"
   #  </FilesMatch>
</IfModule>

# BEGIN Expire headers
<IfModule mod_expires.c>
  ExpiresActive on
  # Set the default expiry times.
  # ExpiresDefault "access plus 2 days"
  ExpiresByType image/jpg "access plus 1 month"
  ExpiresByType image/svg+xml "access 1 month"
  ExpiresByType image/gif "access plus 1 month"
  ExpiresByType image/jpeg "access plus 1 month"
  ExpiresByType image/png "access plus 1 month"
  # ExpiresByType text/css "access plus 1 month"
  # ExpiresByType text/javascript "access plus 1 month"
  # ExpiresByType application/javascript "access plus 1 month"
  # ExpiresByType application/x-shockwave-flash "access plus 1 month"
  ExpiresByType image/ico "access plus 1 month"
  ExpiresByType image/x-icon "access plus 1 month"
  ExpiresByType text/html "access plus 1 month"


#   # CSS and JavaScript
#   ExpiresByType text/css "access plus 1 month"
#   ExpiresByType text/javascript "access plus 1 month"
#   ExpiresByType application/javascript "access plus 1 month"

#   # Fonts
#   ExpiresByType font/woff "access plus 1 year"
#   ExpiresByType font/woff2 "access plus 1 year"
#   ExpiresByType application/font-woff "access plus 1 year"
#   ExpiresByType application/font-woff2 "access plus 1 year"
</IfModule>
# END Expire headers
